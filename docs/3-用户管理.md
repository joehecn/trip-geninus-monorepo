# 3. 用户管理

本文档定义了用户管理模块相关的功能需求和业务逻辑。

## 1. 核心功能

### 1.1. 超级管理员 (Super Administrator)

*   **需求**：系统初始化时，应检查数据库中是否存在一个唯一的、由系统自动创建的超级管理员账号。如果不存在，则应自动创建一个。
*   **实现要点**:
    *   这个账号应被赋予 `ADMIN` 角色。
    *   其登录凭证（如手机号和初始密码）可以从环境变量中读取，以避免硬编码在代码里，方便部署。
    *   创建过程应是幂等的，即多次启动系统不会重复创建或报错。

### 1.2. 用户管理 (CRUD)

*   **需求**：超级管理员 (`ADMIN`) 可以在管理后台对所有用户（包括其他管理员、计划员、导游、普通用户）进行增、删、改、查操作。
*   **删除逻辑**：删除操作必须是“软删除”，而不是物理删除。
*   **实现要点**:
    *   **查询 (Read)**: 提供用户列表，支持按手机号、姓名、角色等条件进行搜索和筛选。
    *   **创建 (Create)**: 管理员创建新用户时，需要提供手机号、姓名、角色和初始密码。
    *   **修改 (Update)**: 管理员可以修改用户的姓名、角色、状态（启用/禁用）以及重置密码。
    *   **软删除 (Soft Delete)**:
        *   需要在 `User` 模型中增加一个 `status` 字段（例如，`UserStatus` 枚举，包含 `ACTIVE`, `DISABLED`, `DELETED` 等状态）。
        *   “删除”操作实际上是将用户的 `status` 标记为 `DELETED`。
        *   所有常规的用户查询（如登录、列表展示）都应默认过滤掉 `status` 为 `DELETED` 的用户。